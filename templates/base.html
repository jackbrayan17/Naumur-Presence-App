{% load static i18n %}
<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Naumur Presence App{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}" />
    <script defer src="{% static 'js/app.js' %}"></script>
  </head>
  <body>
    <div class="bg-orb orb-1"></div>
    <div class="bg-orb orb-2"></div>
    <header class="topbar">
      <div class="nav-left">
        {% if user.is_authenticated %}
          <div class="welcome">
            {% trans "Welcome" %}, {{ user.get_full_name|default:user.username }}
          </div>
        {% else %}
          <div class="welcome">{% trans "Welcome" %}</div>
        {% endif %}
      </div>
      <div class="nav-center">
        <img class="logo" src="{% static 'logo.jpg' %}" alt="Naumur logo" />
      </div>
      <div class="nav-right">
        {% if user.is_authenticated %}
          <a class="avatar-link" href="{% url 'profile' %}">
            {% if user.profile_image %}
              <img class="avatar-img" src="{{ user.profile_image.url }}" alt="{{ user.get_full_name|default:user.username }}" />
            {% else %}
              <span class="avatar-fallback" style="background: {{ user.avatar_color }};">
                {{ user.initials }}
              </span>
            {% endif %}
          </a>
        {% endif %}
        <form class="lang-switch" action="{% url 'set_language' %}" method="post">
          {% csrf_token %}
          <input type="hidden" name="next" value="{{ request.path }}" />
          <button type="submit" name="language" value="en">EN</button>
          <button type="submit" name="language" value="fr">FR</button>
        </form>
        <button class="theme-toggle" type="button" data-theme-toggle>
          <span class="theme-icon" aria-hidden="true">O</span>
        </button>
        {% if user.is_authenticated %}
          <a class="btn btn-outline" href="{% url 'logout' %}">{% trans "Logout" %}</a>
        {% endif %}
      </div>
    </header>
    <main class="container">
      {% if user.is_authenticated %}
        <nav class="subnav">
          <a class="chip" href="{% url 'employee_week' %}">{% trans "My week" %}</a>
          <a class="chip" href="{% url 'profile' %}">{% trans "Profile" %}</a>
          {% if user.is_supervisor %}
            <a class="chip" href="{% url 'supervisor_verify' %}">{% trans "Supervisor" %}</a>
          {% endif %}
          {% if user.is_admin %}
            <a class="chip" href="{% url 'admin_dashboard' %}">{% trans "Dashboard" %}</a>
          {% endif %}
          {% if user.is_supervisor or user.is_admin %}
            <a class="chip" href="{% url 'history' %}">{% trans "History" %}</a>
          {% endif %}
        </nav>
      {% endif %}
      {% include "partials/messages.html" %}
      {% block content %}{% endblock %}
    </main>
  </body>
</html>
